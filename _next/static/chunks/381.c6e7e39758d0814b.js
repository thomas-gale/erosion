!function(){var t={1581:function(t,e,r){"use strict";const n=r(409),o=r(6914);class a{constructor(t={}){this.options=t,this.imports=this.options.imports||{},this.options.variable="",this.settings={},this.counter=0,this.cache={},this.options.escape=this.options.escape||o.reEscape,this.options.evaluate=this.options.evaluate||o.reEvaluate,this.options.interpolate=this.options.interpolate||o.reInterpolate,this.options.helpers&&this.helpers(this.options.helpers),this.options.data&&this.data(this.options.data)}helper(t,e){return o.isObject(t)?this.helpers(t):this.imports[t]=e,this}helpers(t){if(o.isObject(t))for(let e of Object.keys(t))this.helper(e,t[e]);return this}data(t,e){if("object"===typeof t){if(o.isObject(t))for(let r of Object.keys(t))this.data(r,t[r])}else this.cache.data||(this.cache.data={}),this.cache.data[t]=e;return this}_regex(t){let e=Object.assign({},this.options,t);if(!e.interpolate&&!e.regex&&!e.escape&&!e.evaluate)return o.delimiters;let r=e.interpolate||o.reNoMatch;e.regex instanceof RegExp&&(r=e.regex);let n=(e.escape||o.reNoMatch).source+"|"+r.source+"|"+(r===o.reInterpolate?o.reEsTemplate:o.reNoMatch).source+"|"+(e.evaluate||o.reNoMatch).source;return new RegExp(n+"|$","g")}compile(t,e={},r){let s=this;this instanceof a||(o.isObject(e)||(e={}),s=new a(e));let i=String(t);r=n({},s.settings,e&&e.settings,r);let c=n({},s.options,r,e),p=n({},c.imports,c.helpers,r.imports);p.escape=o.escape,n(p,o.omit(s.imports,"engine")),n(p,o.omit(s.cache.data,"engine")),p.engine=s;let l,u,f=Object.keys(p),h=f.map((t=>p[t])),y="__p += '",g=0,d="//# sourceURL="+("sourceURL"in c?c.sourceURL:`engine.templateSources[${++s.counter}]`)+"\n",b=s._regex(c);i.replace(b,((t,e,r,n,a,s)=>(r||(r=n),y+=i.slice(g,s).replace(o.reUnescapedString,o.escapeStringChar),e&&(u=!0,y+=`' +\n__e(${e}) +\n'`),a&&(l=!0,y+=`';\n${a};\n__p += '`),r&&(y+=`' +\n((__t = (${r})) == null ? '' : __t) +\n'`),g=s+t.length,t))),y+="';\n";let m=c.variable;m||(y=`with (obj) {\n${y}\n}\n`),y=(l?y.replace(o.reEmptyStringLeading,""):y).replace(o.reEmptyStringMiddle,"$1").replace(o.reEmptyStringTrailing,"$1;"),y="function("+(m||"obj")+") {\n"+(m?"":"(obj || (obj = {}));\n")+'let __t, __p = ""'+(u?", __e = escape":"")+(l?', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, "") }\n':";\n")+y+"return __p\n}";let M=o.tryCatch((function(){return Function(f,d+`return ${y}`).apply(null,h)}));if(M.source=y,M instanceof Error)throw M;return M}render(t,e,r){let n=Object.assign({},this.cache.data,e);return n.imports&&(n=Object.assign({},n,n.imports)),n.helpers&&(n=Object.assign({},n,n.helpers)),"string"===typeof t&&(t=this.compile(t,r)),t(n)}static get utils(){return o}}t.exports=a},6914:function(t,e){"use strict";Object.prototype.toString;e.reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,e.reUnescapedHtml=/[&<>"'`]/g,e.reHasEscapedHtml=new RegExp(e.reEscapedHtml.source),e.reHasUnescapedHtml=new RegExp(e.reUnescapedHtml.source),e.reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,e.reEscape=/<%-([\s\S]+?)%>/g,e.reEvaluate=/<%([\s\S]+?)%>/g,e.reInterpolate=/<%=([\s\S]+?)%>/g,e.delimiters=/<%-([\s\S]+?)%>|<%=([\s\S]+?)%>|\$\{([^\\}]*(?:\\.[^\\}]*)*)\}|<%([\s\S]+?)%>$/g,e.reNoMatch=/($^)/,e.reUnescapedString=/['\n\r\u2028\u2029\\]/g,e.reEmptyStringLeading=/\b__p \+= '';/g,e.reEmptyStringMiddle=/\b(__p \+=) '' \+/g,e.reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,e.htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},e.htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},e.escapeHtmlChar=t=>e.htmlEscapes[t]||t,e.isObject=t=>"function"===typeof t||t&&"object"===typeof t&&!Array.isArray(t),e.escape=t=>{let r=e.baseToString(t);return r&&e.reHasUnescapedHtml.test(r)?r.replace(e.reUnescapedHtml,e.escapeHtmlChar):r},e.baseToString=t=>t?t+"":"",e.tryCatch=t=>{try{return t()}catch(e){return e}},e.escapeStringChar=t=>"\\"+{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}[t],e.omit=(t,e)=>{let r={};if(!t)return r;e=[].concat(e||[]);for(let n of Object.keys(t))e.includes(n)||(r[n]=t[n]);return r}},409:function(t,e,r){"use strict";const n=Object.prototype.toString,o=r(6179),a=t=>"__proto__"!==t&&"constructor"!==t&&"prototype"!==t,s=t.exports=(t,...e)=>{let r=0;var n;for(("object"===typeof(n=t)?null===n:"function"!==typeof n)&&(t=e[r++]),t||(t={});r<e.length;r++)if(i(e[r])){for(const n of Object.keys(e[r]))a(n)&&(i(t[n])&&i(e[r][n])?s(t[n],e[r][n]):t[n]=e[r][n]);o(t,e[r])}return t};function i(t){return"function"===typeof t||"[object Object]"===n.call(t)}},6179:function(t){"use strict";const e=Object.prototype.toString,r=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;t.exports=(t,...o)=>{if("function"!==typeof(a=t)&&"[object Object]"!==e.call(a)&&!Array.isArray(a))throw new TypeError("expected the first argument to be an object");var a;if(0===o.length||"function"!==typeof Symbol||"function"!==typeof n)return t;for(let e of o){let o=n(e);for(let n of o)r.call(e,n)&&(t[n]=e[n])}return t}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}},s=!0;try{t[n](a,a.exports,r),s=!1}finally{s&&delete e[n]}return a.exports}!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,r){return e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(t,r)}function n(t,r){return e(t,r)}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t,e,r){return s=a()?Reflect.construct:function(t,e,r){var o=[null];o.push.apply(o,e);var a=new(Function.bind.apply(t,o));return r&&n(a,r.prototype),a},s.apply(null,arguments)}function i(t,e,r){return s.apply(null,arguments)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function p(t){return c(t)}function l(t){var e="function"===typeof Map?new Map:void 0;return l=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return i(t,arguments,p(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n(o,t)},l(t)}function u(t){return l(t)}function f(t,e){return!e||"object"!==(e&&r.constructor===Symbol?"symbol":typeof r)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e;var r}function h(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p(t);if(e){var o=p(this).constructor;Reflect.construct(n,arguments,o)}else n.apply(this,arguments);return f(this,r)}}var y,g=r(1581),d=-32,b=32,m=(u(Event),u(Event),function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)))}),M=function(t){var e=t.positions.flat(),r=t.metadata.flat(),n=t.cells.flat(),o=new Float32Array(m(e.length));o.set(e);var a=new Float32Array(m(r.length));a.set(r);var s=new Uint32Array(m(n.length));return s.set(n),{verts:o,vertsNum:e.length,vertsMetadata:a,vertsMetadataNum:r.length,vertsMetadataStride:t.metadataStride,cells:s,cellsNum:n.length}};addEventListener("message",(function(t){if(console.log("(web worker) message received",t.data),"init"===t.data.type){var e=t.data.payload.seed;y=new g.Terrain(e),postMessage({type:"init",args:t.data.payload,payload:!0})}else if("loadMesh"===t.data.type){var r=t.data.payload,n=r.xMin,o=r.zMin,a=r.xMax,s=r.zMax,i=y.loadMesh(n,d,o,a,b,s);postMessage({type:"loadMesh",args:t.data.payload,payload:M(i)}),postMessage(i)}else if("erodeMesh"===t.data.type){var c=t.data.payload,p=c.x,l=c.y,u=c.z,f=c.chunk,h=f.xMin,m=f.zMin,_=f.xMax,v=f.zMax;y.erode(p,l,u);var x=y.loadMesh(h,d,m,_,b,v);postMessage({type:"erodeMesh",args:{xMin:h,zMin:m,xMax:_,zMax:v},payload:M(x)}),postMessage(x)}else if("depositMesh"===t.data.type){var j=t.data.payload,O=j.x,E=j.y,S=j.z,w=j.chunk,R=w.xMin,H=w.zMin,$=w.xMax,z=w.zMax;y.deposit(O,E,S);var U=y.loadMesh(R,d,H,$,b,z);postMessage({type:"depositMesh",args:{xMin:R,zMin:H,xMax:$,zMax:z},payload:M(U)}),postMessage(U)}else postMessage({type:"error",payload:"unknown message type"})}))}(),_N_E={}}();